<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>ESP32 OTA Panel</title>
</head>
<body>

<h2>ESP32 OTA</h2>

<select id="device">
  <option value="Sat_C812AF453AB4">Sat_C812AF453AB4</option>
</select>

<br><br>

<input type="file" id="binFile" accept=".bin">

<br><br>

<button onclick="uploadOTA()">OTA Yükle</button>

<pre id="log"></pre>

<script>
async function uploadOTA() {
  const fileInput = document.getElementById("binFile");
  const device = document.getElementById("device").value;
  const log = document.getElementById("log");

  if (!fileInput.files.length) {
    alert("BIN dosyası seç!");
    return;
  }

  const formData = new FormData();
  formData.append("firmware", fileInput.files[0]);

  log.textContent = "Yükleniyor...\n";

  const res = await fetch(`/ota/${device}`, {
    method: "POST",
    body: formData
  });

  log.textContent += await res.text();
}
</script>

</body>
</html>
