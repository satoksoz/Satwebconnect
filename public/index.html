<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ESP32 Dashboard</title>
</head>
<body>
<h1>Online ESP32 Cihazlar</h1>
<ul id="list"></ul>

<script>
async function load() {
  const res = await fetch("/api/devices");
  const devices = await res.json();
  const ul = document.getElementById("list");
  ul.innerHTML = "";
  devices.forEach(d => {
    const li = document.createElement("li");
    li.innerHTML = `
      ${d}
      <a href="/proxy/${d}/">HTML</a>
      <form action="/ota/${d}" method="post" enctype="multipart/form-data">
        <input type="file" name="firmware">
        <button>OTA</button>
      </form>`;
    ul.appendChild(li);
  });
}
setInterval(load, 2000);
</script>
</body>
</html>
